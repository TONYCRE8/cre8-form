window.onload=(()=>{if(window.jQuery){var e=[];$("form").each(function(){if(config.privacy.enabled)var t={id:$(this).attr("id"),type:$(this).attr("name"),object:{jquery:$(this),dom:this},fields:[],privacy:{input:$(`#${$(this).attr("id")} input[data-privacy="true"]#${config.privacy.elementID}`),valid:!1},valid:!1,message:$(`.${config.messages.elementClass}#complete[data-form='${$(this).attr("id")}']`),action:$(this).attr("action")};else t={id:$(this).attr("id"),type:$(this).attr("name"),object:{jquery:$(this),dom:this},fields:[],valid:!1,message:$(`.${config.messages.elementClass}#complete[data-form='${$(this).attr("id")}']`),action:$(this).attr("action")};e.push(t)}),console.log(e);var t=[];const s=(e,s,i)=>{t.length<1&&t.forEach(e=>{if(config.intlTelInput.enabled){var t=e.getNumber(intlTelInputUtils.numberFormat.RFC3966).slice(4);t.includes(";")?s.set(e.a.id,t.substring(0,t.lastIndexOf(";"))):s.set(e.a.id,t);var i=e.getExtension()?e.getExtension():"";""!=i&&s.set("ext",i),s.set("region",e.getSelectedCountryData().name)}else s.set(input.phone.id,input.phone.value)}),fetch(i,{method:"POST",body:s,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>{e.message.animate({opacity:1},1e3),e.message.text(config.messages.success),$("#"+e.id+" input#submit").attr("disabled",!0),console.log("Complete: ",t),a(e),setTimeout(()=>{e.message.animate({opacity:0},{duration:1e3,complete:()=>{}})},5e3)}).catch(t=>{e.message.animate({opacity:1},1e3),console.log("Error: ",t),e.message.text(config.messages.error),e.message.animate({opacity:0},{duration:3e3,complete:()=>{}})})},i=e=>{e.fields.every(e=>!0===e.valid)?config.privacy?e.privacy.valid||!config.privacy?(e.valid=!0,$(`#${e.id} #submit`).val("Send"),$(`#${e.id} #submit`).attr("disabled",!1)):(e.valid=!1,$(`#${e.id} #submit`).val("Enter details"),$(`#${e.id} #submit`).attr("disabled",!0),$(`#${e.id} .${config.messages.elementClass}#${e.privacy.input.attr("id")}`).html("Please accept privacy terms")):(e.valid=!0,$(`#${e.id} #submit`).val("Send"),$(`#${e.id} #submit`).attr("disabled",!1)):(e.valid=!1,$(`#${e.id} #submit`).val("Enter details"),$(`#${e.id} #submit`).attr("disabled",!0))};e.forEach(e=>{$("#"+e.id+" textarea, #"+e.id+" :text, #"+e.id+' input[type="tel"], #'+e.id+' input[type="date"], #'+e.id+" :checkbox, #"+e.id+" :radio").each(function(){if($(this).attr("id")!=config.privacy.elementID){if("tel"==$(this).attr("type"))var t={type:$(this).attr("type"),id:$(this).attr("id"),formType:e.type,element:this,valid:null,focus:!1,message:$(`.${config.messages.elementClass}#${$(this).attr("id")}`),phone:null};else t={type:$(this).attr("type"),id:$(this).attr("id"),formType:e.type,element:$(this),valid:null,focus:!1,message:$(`.${config.messages.elementClass}#${$(this).attr("id")}`)};e.fields.push(t)}}),console.log(e.fields),e.fields.forEach(s=>{if("tel"==s.type)config.intlTelInput.enabled?(config.intlTelInput.geoIpLookup.enabled?s.phone=window.intlTelInput(s.element,{preferredCountries:config.intlTelInput.preferredCountries?config.intlTelInput.preferredCountries:["us","gb"],utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",separateDialCode:!0,initialCountry:"auto",geoIpLookup:function(e,t){if(config.intlTelInput.geoIpLookup.cookie.enabled){let t=function(e){let t=e+"=",s=document.cookie.split(";");for(let e=0;e<s.length;e++){let i=s[e];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}(config.intlTelInput.geoIpLookup.cookie.name);if(""!=t)e(t);else $.get(config.intlTelInput.geoIpLookup.url,function(){},"jsonp").always(function(t){var s=t&&t.country?t.country:"gb";document.cookie=config.intlTelInput.geoIpLookup.cookie.name+"="+s+";expires"+config.intlTelInput.geoIpLookup.cookie.duration+";path=/",e(s)})}else $.get(config.intlTelInput.geoIpLookup.url,function(){},"jsonp").always(function(t){var s=t&&t.country?t.country:"gb";e(s)})}}):s.phone=window.intlTelInput(s.element,{preferredCountries:config.intlTelInput.preferredCountries?config.intlTelInput.preferredCountries:["us","gb"],utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",separateDialCode:!0}),t.push(s.phone)):t.push(s.element);else if("radio"==s.type){$("input#"+s.id).on("change",t=>{t.preventDefault(),$("input#"+s.id+":checked").val()?(s.element.removeClass("error"),s.message.css("display","none"),s.valid=!0):(s.element.addClass("error"),s.message.css("display","flex"),s.valid=!1),i(e)})}else if("date"==s.type){$("input#"+s.id).on("change",e=>{(e.preventDefault(),$("#"+s.id).is(":focus")&&(s.focus=!0),s.focus)&&(""!=$(s.element).val()?(s.element.removeClass("error"),s.message.css("display","none"),s.valid=!0):(s.valid=!1,s.message.css("display","flex"),s.element.addClass("error")))})}});e.object.jquery.on("keyup",t=>{t.preventDefault();const s=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,a=/^(?=(?:\+|0{2})?(?:(?:[\(\-\)\.\/ \t\f]*\d){7,10})?(?:[\-\.\/ \t\f]?\d{2,3})(?:[\-\s]?[ext]{1,3}[\-\.\/ \t\f]?\d{1,4})?$)((?:\+|0{2})\d{0,3})?(?:[\-\.\/ \t\f]?)(\(0\d[ ]?\d{0,4}\)|\(\d{0,4}\)|\d{0,4})(?:[\-\.\/ \t\f]{0,2}\d){3,8}(?:[\-\s]?(?:x|ext)[\-\t\f ]?(\d{1,4}))?$/;e.fields.forEach(e=>{if($("#"+e.id).is(":focus")&&(e.focus=!0),e.focus)if("tel"==e.type)config.intlTelInput.enabled?e.phone.isValidNumber()?(e.element.classList.remove("error"),e.message.css("display","none"),e.valid=!0):(e.valid=!1,e.message.text($(e.element).data("error-msg")),e.element.classList.add("error"),e.message.css("display","flex")):""!=e.element.value&&a.test(e.element.value)?(e.element.classList.remove("error"),e.message.css("display","none"),e.valid=!0):(e.valid=!1,e.message.text($(e.element).data("error-msg")),e.element.classList.add("error"),e.message.css("display","flex"));else if("email"==e.id){var t=e.element.val().toLowerCase();e.element.val(t),""!=e.element.val()&&s.test(e.element.val())?(e.element.removeClass("error"),e.message.css("display","none"),e.valid=!0):""==e.element.val()||s.test(e.element.val())?(e.element.addClass("error"),e.message.text($(e.element).data("error-msg")),e.message.css("display","flex"),e.valid=!1):(e.element.addClass("error"),e.message.text($(e.element).data("invalid-msg")),e.message.css("display","flex"),e.valid=!1)}else""!=e.element.val()?(e.element.removeClass("error"),e.message.css("display","none"),e.valid=!0):(e.element.addClass("error"),e.message.text($(e.element).data("error-msg")),e.message.css("display","flex"),e.valid=!1)}),i(e)}),e.object.jquery.on("change",t=>{t.preventDefault();var s=!1;e.privacy.input.is(":focus")&&(s=!0),s&&(e.privacy.input.is(":checked")?(e.privacy.input.removeClass("error"),$(`#${e.id} .${config.messages.elementClass}#${e.privacy.input.attr("id")}`).css("display","none"),e.privacy.valid=!0):(e.privacy.input.addClass("error"),$(`#${e.id} .${config.messages.elementClass}#${e.privacy.input.attr("id")}`).text(e.privacy.input.data("error-msg")),$(`#${e.id} .${config.messages.elementClass}#${e.privacy.input.attr("id")}`).css("display","flex"),e.privacy.valid=!1)),i(e)}),e.object.jquery.on("submit",t=>{t.preventDefault(),$("#"+e.id+" #submit").attr("disabled",!0);const i=new FormData(e.object.dom);s(e,i,e.action)});e.object.jquery.on("open:countrydropdown",()=>{$(`form#${e.id} input[type="tel"]`).addClass("active")}),e.object.jquery.on("close:countrydropdown",()=>{$(`form#${e.id} input[type="tel"]`).removeClass("active")})}),$("#reset").on("click",()=>{a(),message.html("")});const a=e=>{e.object.jquery.find('textarea, :text, input[type="tel"], input[type="date"], input[type="month"]').val(""),e.object.jquery.find(":checkbox, :radio").prop("checked",!1),$("#"+e.id+" #submit").val("Enter details"),e.fields.forEach(e=>{e.valid=!1}),config.messages.scrollTo&&$([document.documentElement,document.body]).animate({scrollTop:e.object.jquery.offset().top-280},1e3)}}else console.error("cre8 form: jQuery hasn'nt been loaded")});