$(document).ready(()=>{$("#name")&&$("#name").focus();var e=[];$("form").each(function(){var t={id:$(this).attr("id"),type:$(this).attr("name"),object:{jquery:$(this),dom:this},fields:[],privacy:{input:$("#"+$(this).attr("id")+' input[data-privacy="true"]'),valid:null},valid:!1,message:$(`.status-message#complete[data-form='${$(this).attr("id")}']`),action:$(this).attr("action")};e.push(t)}),console.log(e);var t=[];const s=e=>{e.fields.every(e=>!0===e.valid)?e.privacy.valid?(e.valid=!0,$(`#${e.id} #submit`).val("Send"),$(`#${e.id} #submit`).attr("disabled",!1)):(e.valid=!1,$(`#${e.id} #submit`).val("Enter details"),$(`#${e.id} #submit`).attr("disabled",!0),$(`#${e.id} .status-message#${e.privacy.input.attr("id")}`).html("Please accept privacy terms")):(e.valid=!1,$(`#${e.id} #submit`).val("Enter details"),$(`#${e.id} #submit`).attr("disabled",!0))};e.forEach(e=>{$("#"+e.id+" textarea, #"+e.id+" :text, #"+e.id+' input[type="tel"], #'+e.id+' input[type="date"], #'+e.id+" :checkbox, #"+e.id+" :radio").each(function(){if("privacy"!=$(this).attr("id")){if("tel"==$(this).attr("type"))var t={type:$(this).attr("type"),id:$(this).attr("id"),formType:e.type,element:this,valid:null,focus:!1,message:$(`.status-message#${$(this).attr("id")}`),phone:null};else t={type:$(this).attr("type"),id:$(this).attr("id"),formType:e.type,element:$(this),valid:null,focus:!1,message:$(`.status-message#${$(this).attr("id")}`)};e.fields.push(t)}}),console.log(e.fields),e.fields.forEach(a=>{if("tel"==a.type)a.phone=window.intlTelInput(a.element,{preferredCountries:["gb","us","ca"],utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",separateDialCode:!0}),t.push(a.phone);else if("radio"==a.type){$("input#"+a.id).on("change",t=>{t.preventDefault(),$("input#"+a.id+":checked").val()?(a.element.removeClass("error"),a.message.css("display","none"),a.valid=!0):(a.element.addClass("error"),a.message.css("display","flex"),a.valid=!1),s(e)})}else if("date"==a.type){$("input#"+a.id).on("change",e=>{(e.preventDefault(),$("#"+a.id).is(":focus")&&(a.focus=!0),a.focus)&&(""!=$(a.element).val()?(a.element.removeClass("error"),a.message.css("display","none"),a.valid=!0):(a.valid=!1,a.message.css("display","flex"),a.element.addClass("error")))})}});e.object.jquery.on("keyup",t=>{t.preventDefault();const a=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/;e.fields.forEach(e=>{if($("#"+e.id).is(":focus")&&(e.focus=!0),e.focus)if("tel"==e.type)e.phone.isValidNumber()?(e.element.classList.remove("error"),e.message.css("display","none"),e.valid=!0):(e.valid=!1,e.message.text($(e.element).data("error-msg")),e.element.classList.add("error"),e.message.css("display","flex"));else if("email"==e.id){var t=e.element.val().toLowerCase();e.element.val(t),""!=e.element.val()&&a.test(e.element.val())?(e.element.removeClass("error"),e.message.css("display","none"),e.valid=!0):""==e.element.val()||a.test(e.element.val())?(e.element.addClass("error"),e.message.text($(e.element).data("error-msg")),e.message.css("display","flex"),e.valid=!1):(e.element.addClass("error"),e.message.text($(e.element).data("invalid-msg")),e.message.css("display","flex"),e.valid=!1)}else""!=e.element.val()?(e.element.removeClass("error"),e.message.css("display","none"),e.valid=!0):(e.element.addClass("error"),e.message.text($(e.element).data("error-msg")),e.message.css("display","flex"),e.valid=!1)}),s(e)}),e.object.jquery.on("change",t=>{t.preventDefault();var a=!1;e.privacy.input.is(":focus")&&(a=!0),a&&(e.privacy.input.is(":checked")?(e.privacy.input.removeClass("error"),$(`#${e.id} .status-message#${e.privacy.input.attr("id")}`).css("display","none"),e.privacy.valid=!0):(e.privacy.input.addClass("error"),$(`#${e.id} .status-message#${e.privacy.input.attr("id")}`).text(e.privacy.input.data("error-msg")),$(`#${e.id} .status-message#${e.privacy.input.attr("id")}`).css("display","flex"),e.privacy.valid=!1)),s(e)}),e.object.jquery.on("submit",s=>{s.preventDefault(),$("#"+e.id+" #submit").attr("disabled",!0);const i=new FormData(e.object.dom);((e,s,i)=>{t.length<1&&t.forEach(e=>{var t=e.getNumber(intlTelInputUtils.numberFormat.RFC3966).slice(4);t.includes(";")?s.set(e.a.id,t.substring(0,t.lastIndexOf(";"))):s.set(e.a.id,t);var a=e.getExtension()?e.getExtension():"";""!=a&&s.set("ext",a),s.set("region",e.getSelectedCountryData().name)}),fetch(i,{method:"POST",body:s,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>{e.message.animate({opacity:1},1e3),e.message.text("Thank you very much! We've got your message and will be in touch with you soon."),$("#"+e.id+" input#submit").attr("disabled",!0),console.log("Complete: ",t),a(e),setTimeout(()=>{e.message.animate({opacity:0},{duration:1e3,complete:()=>{}})},5e3)}).catch(t=>{e.message.animate({opacity:1},1e3),console.log("Error: ",t),e.message.text("Sorry, something went wrong. Try refreshing and filling out the form again."),e.message.animate({opacity:0},{duration:3e3,complete:()=>{}})})})(e,i,e.action)});e.object.jquery.on("open:countrydropdown",()=>{$(`form#${e.id} input[type="tel"]`).addClass("active")}),e.object.jquery.on("close:countrydropdown",()=>{$(`form#${e.id} input[type="tel"]`).removeClass("active")})}),$("#reset").on("click",()=>{a(),message.html("")});const a=e=>{e.object.jquery.find('textarea, :text, input[type="tel"], input[type="date"]').val(""),e.object.jquery.find(":checkbox, :radio").prop("checked",!1),$("#"+e.id+" #submit").val("Enter details"),e.fields.forEach(e=>{e.valid=!1}),$([document.documentElement,document.body]).animate({scrollTop:e.object.jquery.offset().top-280},1e3)};$("#newsletter-open").on("click",()=>{$(".newsletter").css("opacity","1"),$(".newsletter").css("pointer-events","auto")}),$("#newsletter-close").on("click",()=>{$(".newsletter").css("opacity","0"),$(".newsletter").css("pointer-events","none")})});